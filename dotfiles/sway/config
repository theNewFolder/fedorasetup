# SwayFX Configuration - Gruvbox Dark Vibrant
# Converted from NixOS Niri config

# ===== Variables =====
set $mod Mod4
set $term foot
set $term2 kitty
set $menu wofi --show drun
set $browser firefox

# Gruvbox Dark Vibrant colors
set $bg        #1d2021
set $bg1       #282828
set $bg2       #3c3836
set $bg3       #504945
set $fg        #fbf1c7
set $red       #d42020
set $green     #a8b020
set $yellow    #e8a50e
set $blue      #4f96c8
set $purple    #c8509b
set $aqua      #70b060
set $orange    #e86420
set $gray      #a09080
set $br_red    #ff5050
set $br_green  #d0f020
set $br_yellow #ffd040
set $br_blue   #60c0ff
set $br_purple #ff60d0
set $br_aqua   #60ff90
set $br_orange #ff9030

# ===== Output =====
# Let kanshi handle output profiles (HDMI vs laptop-only)
# Fallback: enable eDP-1 so we always have a display
output eDP-1 {
    scale 1
    position 0 0
}

# Wallpaper
output * bg ~/Pictures/Wallpapers/canyon.jpg fill

# ===== Input =====
input type:keyboard {
    xkb_layout us
    repeat_delay 300
    repeat_rate 50
}

input type:touchpad {
    tap enabled
    natural_scroll enabled
    accel_profile adaptive
    pointer_accel 0.3
}

input type:pointer {
    accel_profile flat
    pointer_accel 0.0
}

# ===== SwayFX Eye Candy =====
blur enable
blur_xray disable
blur_passes 3
blur_radius 5

corner_radius 16

shadows enable
shadow_blur_radius 20
shadow_color #00000080
shadow_offset 0 4

layer_effects "waybar" blur enable; shadows enable; corner_radius 12
layer_effects "wofi" blur enable; shadows enable; corner_radius 16

# Dim unfocused windows
default_dim_inactive 0.05

# ===== Appearance =====
font pango:JetBrainsMono Nerd Font 11

# Gaps
gaps inner 20
gaps outer 0

# Border
default_border pixel 3
default_floating_border pixel 3
smart_borders on

# Colors               border      background  text    indicator   child_border
client.focused         $br_yellow  $bg1        $fg     $br_aqua    $br_yellow
client.focused_inactive $bg3       $bg2        $fg     $bg3        $bg3
client.unfocused       $bg2        $bg1        $gray   $bg2        $bg2
client.urgent          $br_red     $red        $fg     $br_red     $br_red

# ===== Cursor =====
seat * xcursor_theme default 24

# ===== Keybindings =====

# Application Launchers
bindsym $mod+Return exec $term
bindsym $mod+Shift+Return exec $term2
bindsym $mod+d exec $menu
bindsym $mod+space exec $menu
bindsym $mod+q kill

# Quick Launch
bindsym $mod+b exec $browser
bindsym $mod+e exec emacsclient -c -a emacs
bindsym $mod+Shift+e exec $term -e emacsclient -t -a emacs
bindsym $mod+t exec thunar
bindsym $mod+m exec $term -e btop

# Emacs Org-mode
bindsym $mod+c exec emacsclient -c -e "(org-capture)"
bindsym $mod+a exec emacsclient -c -e "(org-agenda)"
bindsym $mod+n exec emacsclient -c -e "(org-roam-node-find)"
bindsym $mod+Shift+n exec emacsclient -c -e "(org-roam-dailies-capture-today)"

# Focus (Vim-style)
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move windows
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Workspaces
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9

# Move to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9

# Layout
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+Shift+s layout toggle split
bindsym $mod+v splitv
bindsym $mod+Shift+v splith
bindsym $mod+f fullscreen toggle
bindsym $mod+Shift+space floating toggle
bindsym $mod+Shift+c reload

# Resize mode
mode "resize" {
    bindsym h resize shrink width 30px
    bindsym j resize grow height 30px
    bindsym k resize shrink height 30px
    bindsym l resize grow width 30px
    bindsym Left resize shrink width 30px
    bindsym Down resize grow height 30px
    bindsym Up resize shrink height 30px
    bindsym Right resize grow width 30px
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# Scratchpad
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

# Screenshots
bindsym Print exec grim -g "$(slurp)" ~/Pictures/Screenshots/$(date +%Y%m%d-%H%M%S).png
bindsym $mod+Print exec grim ~/Pictures/Screenshots/$(date +%Y%m%d-%H%M%S).png
bindsym Ctrl+Print exec grim -g "$(slurp)" - | wl-copy
bindsym $mod+Shift+Print exec grim - | wl-copy

# Audio
bindsym XF86AudioRaiseVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindsym XF86AudioLowerVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindsym XF86AudioMute exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindsym XF86AudioMicMute exec wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindsym $mod+equal exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindsym $mod+minus exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-

# Media
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous
bindsym $mod+p exec playerctl play-pause

# Brightness
bindsym XF86MonBrightnessUp exec brightnessctl set 10%+
bindsym XF86MonBrightnessDown exec brightnessctl set 10%-
bindsym $mod+bracketright exec brightnessctl set 10%+
bindsym $mod+bracketleft exec brightnessctl set 10%-

# Lock & Power
bindsym $mod+Ctrl+Escape exec swaylock -f -c 1d2021
bindsym $mod+Shift+q exec swaynag -t warning -m 'Exit sway?' -B 'Yes' 'swaymsg exit'

# ===== AI & Productivity =====
bindsym $mod+g exec foot -a floating -e lazygit
bindsym $mod+Shift+w exec wallpaper-rotate
bindsym $mod+i exec foot -a floating -e gemini
bindsym $mod+Shift+i exec foot -a floating -e claude
bindsym $mod+Shift+b exec foot -a floating -e bluetui
bindsym $mod+Shift+m exec foot -a floating -e nmtui

# ===== Window Rules =====
# Browsers on workspace 2
assign [app_id="firefox"] workspace number 2
assign [app_id="chromium"] workspace number 2

# Editors on workspace 1
assign [app_id="emacs"] workspace number 1

# Chat on workspace 3
assign [app_id="discord"] workspace number 3
assign [app_id="slack"] workspace number 3

# Media on workspace 4
assign [app_id="mpv"] workspace number 4

# Floating windows
for_window [app_id="floating"] floating enable, resize set width 1200 height 800
for_window [app_id="pavucontrol"] floating enable
for_window [app_id="bluetuith"] floating enable
for_window [title="Picture-in-Picture"] floating enable, sticky enable
for_window [window_role="pop-up"] floating enable
for_window [window_role="dialog"] floating enable

# Opacity for terminals
for_window [app_id="foot"] opacity 0.95
for_window [app_id="kitty"] opacity 0.95

# ===== Startup =====
exec waybar
exec mako
exec wl-paste --watch cliphist store
exec swayidle -w \
    timeout 600 'swaylock -f -c 1d2021' \
    timeout 900 'swaymsg "output * power off"' \
    resume 'swaymsg "output * power on"'
exec nm-applet --indicator
exec /usr/libexec/polkit-gnome-authentication-agent-1 2>/dev/null || true
exec wlsunset -l 25 -L 55
exec kanshi

include /etc/sway/config.d/*
